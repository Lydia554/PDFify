%!
% pdfa_def.ps: PDF/A-3b compliance setup for Ghostscript

% Define ICC profile path
/iccfile (/app/sRGB_IEC61966-2-1_no_black_scaling.icc) (r) file def
/iccfilelength iccfile length def

% Define OutputIntent dictionary
/OutputIntentDict <<
  /Type /OutputIntent
  /S /GTS_PDFA3
  /OutputConditionIdentifier (sRGB IEC61966-2.1)
  /Info (sRGB IEC61966-2.1)
  /DestOutputProfile iccfile
>> def

% Put OutputIntent into an array as required
/OutputIntents [ OutputIntentDict ] def

% Attach OutputIntents to the document
userdict /pdfa_def 100 dict put
pdfa_def begin
  <<
    /OutputIntents OutputIntents
  >> setdistillerparams
end
